(window.webpackJsonpndivision=window.webpackJsonpndivision||[]).push([[0],{183:function(e,t,a){e.exports=a(321)},192:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(34),l=a.n(i),s=a(38),c=a(84),u=[{id:1,date:"2019-08-07",store:"Farm to tbale",desc:"bought cherries and salad for our lunch",amount:20,payer:"Aree"},{id:2,date:"2019-08-07",store:"Farm to tbale",desc:"bought cherries and salad for our lunch",amount:20,payer:"Aree"},{id:3,date:"2019-08-07",store:"Farm to tbale",desc:"bought cherries and salad for our lunch",amount:20,payer:"Miika"},{id:4,date:"2019-08-07",store:"Farm to tbale",desc:"bought cherries and salad for our lunch",amount:20,payer:"Aree"}],d={currentPage:1,title:"",people:["Aree","Miika","Kevin"],expenditures:u,totalAmount:m(u),transfers:[]};function o(e,t){var a=m(e)/t.length,n=t.map(function(e){return{name:e,amount:a}});e.forEach(function(e){n.filter(function(t){return t.name===e.payer})[0].amount-=e.amount}),n.sort(function(e,t){return e.amount-t.amount});for(var r=[];n.length>1;){var i=n[0],l=n[n.length-1];r.push({sender:l.name,receiver:i.name,amount:l.amount});var s=i.amount+l.amount;0===s?(n.shift(),n.pop()):s>0?(l.amount+=i.amount,n.shift()):(i.amount+=l.amount,n.pop())}return r}function m(e){return e.reduce(function(e,t){return e+t.amount},0)}var E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=e.expenditures;switch(t.type){case"SET_TITLE":return e.title=t.title,e;case"SET_PEOPLE":return Object.assign({},e,{people:t.people});case"DELETE_EXPENDITURE":return a=a.filter(function(e){return e.id!==t.id}),Object.assign({},e,{expenditures:a,totalAmount:m(a),transfers:o(a,e.people)});case"SAVE_EXPENDITURE":return a=a.filter(function(e){return e.id!==t.id}).concat(t.expenditure),Object.assign({},e,{expenditures:a,totalAmount:m(a),transfers:o(a,e.people)});case"MOVE_STEP":return Object.assign({},e,{currentPage:t.pageNum});case"GET_TRANSFERS":return Object.assign({},e,{transfers:o(a,e.people)});default:return e}},p=Object(c.b)(E),h=a(329),v=a(174),b=a(66),f=a(40),g=(a(192),a(53)),x=a(54),N=a(57),y=a(55),S=a(20),w=a(58),O=a(334),j=function(e){return{type:"SET_TITLE",title:e}},k=function(e){return{type:"SET_PEOPLE",people:e}},T=function(e){return{type:"DELETE_EXPENDITURE",id:e.id}},C=function(e){return{type:"SAVE_EXPENDITURE",id:e.id,expenditure:e}},A=function(){return{type:"GET_TRANSFERS"}};var D=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(N.a)(this,Object(y.a)(t).call(this,e))).state={title:p.getState().title},a.handleChange=a.handleChange.bind(Object(S.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(S.a)(a)),a}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.setTitle(this.state.title),this.props.history.push("/group")}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui center"},r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement(O.a,{as:"h2",textAlign:"center"},"What is your expenditures about?"),r.a.createElement("div",{className:"ui one column input big stackable center aligned page grid"},r.a.createElement("div",{className:"column twelve wide"},r.a.createElement("div",{className:"ui input fluid"},r.a.createElement("input",{type:"text",placeholder:"Enter the title...",value:this.state.title,onChange:this.handleChange})),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("button",{className:"ui inverted green big button",onClick:this.handleSubmit},r.a.createElement("i",{className:"save icon"}),"\xa0Save"))))}}]),t}(r.a.Component),M=Object(s.b)(null,function(e){return{setTitle:function(t){return e(j(t))}}})(D);var P=function(e){function t(e){var a;return Object(g.a)(this,t),(a=Object(N.a)(this,Object(y.a)(t).call(this,e))).state={names:p.getState().people},a.handleNameChanged=a.handleNameChanged.bind(Object(S.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(S.a)(a)),a}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleNameChanged",value:function(e){var t=e.target.value.split(",").map(function(e){return e.trim()});this.setState({names:Array.from(new Set(t))})}},{key:"handleSubmit",value:function(){this.props.setPeople(this.state.names),this.props.history.push("/exps")}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui center"},r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement(O.a,{as:"h2",textAlign:"center"},"With whom did you share expenditures?"),r.a.createElement(O.a,{as:"h3",textAlign:"center"},"Enter the names of people to share"),r.a.createElement("div",{className:"ui one column input big stackable center aligned page grid"},r.a.createElement("div",{className:"column twelve wide"},r.a.createElement("div",{className:"ui left icon fluid input"},r.a.createElement("input",{type:"text",placeholder:"Enter seperated with comma(,)",onChange:this.handleNameChanged,defaultValue:this.state.names.join(",")}),r.a.createElement("i",{className:"users icon"})),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",null,this.state.names&&this.state.names.map(function(e,t){return r.a.createElement("button",{className:"ui basic button",key:t},r.a.createElement("i",{className:"icon user"}),e)})),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("button",{className:"ui inverted green big button",onClick:this.handleSubmit},r.a.createElement("i",{className:"save icon"}),"\xa0Save"))))}}]),t}(r.a.Component),_=Object(s.b)(null,function(e){return{setPeople:function(t){return e(k(t))}}})(P),I=a(332),R=a(333),F=a(90),L=a(330),V=a(331),H=a(328),q=a(60),B=a(162),G=a.n(B),U=a(163),X=a.n(U);var $={id:void 0,date:void 0,store:void 0,desc:void 0,amount:void 0,payer:void 0},z=function(e){function t(e){var a;return Object(g.a)(this,t),a=Object(N.a)(this,Object(y.a)(t).call(this,e)),e.getTransfers(),a.state={editableExpenditure:$,showSucceedMessage:!1,showErrorMessage:!1,expenditures:p.getState().expenditures,transferList:p.getState().transfers},a.exportToFile=a.exportToFile.bind(Object(S.a)(a)),a.saveExpenditure=a.saveExpenditure.bind(Object(S.a)(a)),a.handleDismiss=a.handleDismiss.bind(Object(S.a)(a)),a.removeErrorMessage=a.removeErrorMessage.bind(Object(S.a)(a)),a.editExpenditure=a.editExpenditure.bind(Object(S.a)(a)),a}return Object(w.a)(t,e),Object(x.a)(t,[{key:"handleDismiss",value:function(){this.setState({showSucceedMessage:!1})}},{key:"removeErrorMessage",value:function(){this.setState({showErrorMessage:!1})}},{key:"getEditableExpenditureISODate",value:function(){if(this.state.editableExpenditure.date)return new Date(this.state.editableExpenditure.date).toISOString().substr(0,10)}},{key:"editExpenditure",value:function(e){this.setState({editableExpenditure:e}),window.scrollTo(0,0)}},{key:"deleteExpenditure",value:function(e){this.props.deleteExpenditure(e);var t=p.getState(),a=t.expenditures,n=t.transfers;this.setState({expenditures:a,transferList:n})}},{key:"saveExpenditure",value:function(e){e.preventDefault();var t=this.state,a=t.expenditures,n=t.editableExpenditure;n.id||(n.id=a[a.length-1].id+1),n.date=document.querySelector("#date").value,n.store=document.querySelector("#store").value,n.desc=document.querySelector("#desc").value,n.amount=parseInt(document.querySelector("#amount").value),n.payer=document.querySelector("#payer>.text").innerText;var r=n.date,i=n.desc,l=n.amount,s=n.payer;r&&n.store&&i&&l&&s?(this.props.saveExpenditure(n),this.setState({expenditures:p.getState().expenditures.sort(function(e,t){return e.id-t.id}),transferList:p.getState().transfers,editableExpenditure:$,showSucceedMessage:!0}),this.form.reset()):this.setState({showErrorMessage:!0})}},{key:"exportToFile",value:function(){var e=new Date,t=[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-");G.a.toJpeg(document.getElementById("expenditure_settlement"),{backgroundColor:"white"}).then(function(e){return X()(e,"expenditure.png_".concat(t,".jpeg"))})}},{key:"render",value:function(){var e=this,t=p.getState(),a=t.title,n=t.people,i=t.totalAmount,l=n.map(function(e){return{key:e,value:e,text:e}});return r.a.createElement("div",{className:"ui center"},r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement(O.a,{as:"h2",textAlign:"center"},"Enter expenditures, and",r.a.createElement("br",null),"Get to know the efficient settlement!"),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",{className:"ui piled segment"},r.a.createElement("form",{className:"ui form",ref:function(t){return e.form=t},onSubmit:this.saveExpenditure},r.a.createElement(I.a,{negative:!0,style:{display:this.state.showErrorMessage?"block":"none"}},r.a.createElement(I.a.Header,null,"Failed to save the expenditure"),r.a.createElement("p",null,"Please enter all fields.")),r.a.createElement(I.a,{info:!0,style:{display:this.state.showSucceedMessage?"block":"none"},onDismiss:this.handleDismiss},r.a.createElement(I.a.Header,null,"Success!"),r.a.createElement("p",null,"The expenditure is saved.")),r.a.createElement("div",{className:"fields"},r.a.createElement("div",{className:"five wide field"},r.a.createElement("label",null,"Expense date"),r.a.createElement("input",{id:"date",type:"date",defaultValue:this.getEditableExpenditureISODate()})),r.a.createElement("div",{className:"four wide field"},r.a.createElement("label",null,"Payee(store) name"),r.a.createElement("input",{id:"store",type:"text",placeholder:"(e.g. K supermarket)",defaultValue:this.state.editableExpenditure.store,onChange:this.removeErrorMessage})),r.a.createElement("div",{className:"seven wide field"},r.a.createElement("label",null,"Description"),r.a.createElement("input",{id:"desc",type:"text",placeholder:"(e.g. Buy water)",defaultValue:this.state.editableExpenditure.desc,onChange:this.removeErrorMessage}))),r.a.createElement("div",{className:"fields"},r.a.createElement("div",{className:"six wide field"},r.a.createElement("label",null,"Paid amount"),r.a.createElement(R.a,{id:"amount",labelPosition:"right",type:"number",placeholder:"(e.g. 2)",defaultValue:this.state.editableExpenditure.amount,onChange:this.removeErrorMessage},r.a.createElement(F.a,{basic:!0},"$"),r.a.createElement("input",null),r.a.createElement(F.a,null,".00"))),r.a.createElement("div",{className:"six wide field"},r.a.createElement("label",null,"Payer name"),r.a.createElement(L.a,{id:"payer",search:!0,options:l,placeholder:this.state.editableExpenditure.payer,defaultValue:this.state.editableExpenditure.payer,onChange:this.removeErrorMessage})),r.a.createElement("div",{className:"four wide field"},r.a.createElement("button",{className:"ui primary basic button",style:{position:"absolute",bottom:0,right:0},type:"submit"},r.a.createElement("i",{className:"".concat(this.state.editableExpenditure.id?"save":"add"," icon")}),this.state.editableExpenditure.id?"Save":"Add"))))),r.a.createElement("div",{id:"expenditure_settlement"},r.a.createElement(O.a,{as:"h3",textAlign:"left"},"Expenditure Histories of ",r.a.createElement("span",{style:{color:"olive"}},a)),r.a.createElement(V.a,{celled:!0,selectable:!0,sortable:!0,color:"olive"},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Row,null,["#","Date","Payee(store) Name","Description","Paid Amount","Payer Name","Action"].map(function(e,t){return r.a.createElement(V.a.HeaderCell,{key:t},e)}))),r.a.createElement(V.a.Body,null,this.state.expenditures.map(function(t,a){return r.a.createElement(V.a.Row,{key:a},Object.values(t).map(function(e,t){return r.a.createElement(V.a.Cell,{key:"".concat(a,"_").concat(t)},e)}),r.a.createElement(V.a.Cell,{textAlign:"center",key:"cell_".concat(a)},r.a.createElement("div",{className:"ui small basic icon buttons"},r.a.createElement("button",{className:"ui button",onClick:function(a){return e.editExpenditure(t)}},r.a.createElement("i",{className:"edit icon"})),r.a.createElement("button",{className:"ui button",onClick:function(a){return e.deleteExpenditure(t)}},r.a.createElement("i",{className:"trash alternate icon"})))))}))),r.a.createElement(O.a,{as:"h4",textAlign:"center"},"Your group spent \xa0\xa0",r.a.createElement("span",{className:"ui tag green label"},"$",i)," in total. \xa0\xa0",r.a.createElement("span",{className:"ui tag olive label"},"$",Math.round(i/n.length*100)/100)," per person."),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement(H.a,{horizontal:!0},r.a.createElement(O.a,{as:"h4"},r.a.createElement(q.a.Group,{size:"large"},r.a.createElement(q.a,{name:"money bill alternate outline"}),r.a.createElement(q.a,{corner:!0,name:"bar chart"})),"\xa0\xa0Settlements")),r.a.createElement(O.a,{as:"h4",textAlign:"left"},"This way, you'll be done with the settlement.."),r.a.createElement(V.a,{celled:!0,sortable:!0,selectable:!0,color:"green",textAlign:"center"},r.a.createElement(V.a.Header,null,r.a.createElement(V.a.Row,null,r.a.createElement(V.a.HeaderCell,null,"Sender ",r.a.createElement("i",{className:"arrow right icon"})," Receiver"),r.a.createElement(V.a.HeaderCell,null,"Amount"))),r.a.createElement(V.a.Body,null,this.state.transferList.map(function(e){return r.a.createElement(V.a.Row,null,r.a.createElement(V.a.Cell,null,e.sender," ",r.a.createElement("i",{className:"arrow right icon"})," ",e.receiver),r.a.createElement(V.a.Cell,null,"$",Math.round(100*e.amount)/100))})))),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("button",{className:"ui right floated primary button",onClick:this.exportToFile},r.a.createElement("i",{className:"download icon"})," Download"),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",{className:"ui hidden divider"}))}}]),t}(r.a.Component),J=Object(s.b)(null,function(e){return{saveExpenditure:function(t){return e(C(t))},deleteExpenditure:function(t){return e(T(t))},getTransfers:function(t){return e(A())}}})(z);var K=function(){return[r.a.createElement(h.a,null,r.a.createElement(v.a,{src:"https://fontmeme.com/permalink/190830/b2a3482ddfcbadd5d59ca2e91bc75a81.png",size:"medium",centered:!0}),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement(b.a,null,r.a.createElement("div",{className:"ui fluid ordered steps"},r.a.createElement(b.b,{exact:!0,to:"/",className:"step"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"title"},"Expenditure Title"),r.a.createElement("div",{className:"description"},"Enter the title of the expenditure"))),r.a.createElement(b.b,{exact:!0,to:"/group",className:"step"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"title"},"Group Information"),r.a.createElement("div",{className:"description"},"Enter names of people to share"))),r.a.createElement(b.b,{exact:!0,to:"/exps",className:"step"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"title"},"Expenditure Details"),r.a.createElement("div",{className:"description"},"Enter expenditure details")))),r.a.createElement(f.a,{exact:!0,path:"/",component:M}),r.a.createElement(f.a,{exact:!0,path:"/group",component:_}),r.a.createElement(f.a,{exact:!0,path:"/exps",component:J})))]};a(320);l.a.render(r.a.createElement(s.a,{store:p},r.a.createElement("div",{style:{padding:"50px 0px"}},r.a.createElement(K,null))),document.getElementById("root")),window.store=p}},[[183,1,2]]]);
//# sourceMappingURL=main.7a40d8d1.chunk.js.map