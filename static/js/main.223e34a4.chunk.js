(window.webpackJsonpndivision=window.webpackJsonpndivision||[]).push([[0],{194:function(e,t,a){e.exports=a(333)},203:function(e,t,a){},332:function(e,t,a){},333:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(34),i=a.n(l),s=a(38),c=a(91),o={title:"",people:[],expenditures:[],totalAmount:0,transfers:[]};function u(e,t){var a=d(e)/t.length,n=t.map(function(e){return{name:e,amount:a}});e.forEach(function(e){n.filter(function(t){return t.name===e.payer})[0].amount-=e.amount}),n.sort(function(e,t){return e.amount-t.amount});for(var r=[];n.length>1;){var l=n[0],i=n[n.length-1];r.push({sender:i.name,receiver:l.name,amount:i.amount});var s=l.amount+i.amount;0===s?(n.shift(),n.pop()):s>0?(i.amount+=l.amount,n.shift()):(l.amount+=i.amount,n.pop())}return r}function d(e){return e.reduce(function(e,t){return e+t.amount},0)}var m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0,a=e.expenditures;switch(t.type){case"SET_TITLE":return e.title=t.title,e;case"SET_PEOPLE":return Object.assign({},e,{people:t.people});case"DELETE_EXPENDITURE":return a=a.filter(function(e){return e.id!==t.id}),Object.assign({},e,{expenditures:a,totalAmount:d(a),transfers:u(a,e.people)});case"SAVE_EXPENDITURE":return a=a.filter(function(e){return e.id!==t.id}).concat(t.expenditure),Object.assign({},e,{expenditures:a,totalAmount:d(a),transfers:u(a,e.people)});case"GET_TRANSFERS":return Object.assign({},e,{transfers:u(a,e.people)});default:return e}},p=Object(c.b)(m),E=a(346),h=a(350),b=a(182),f=a(345),v=a(67),g=a(40),x=(a(203),a(58)),y=a(59),N=a(62),S=a(60),w=a(20),C=a(63),k=a(116),O=a(349),j=a(335),T=function(e){return{type:"SET_TITLE",title:e}},D=function(e){return{type:"SET_PEOPLE",people:e}},A=function(e){return{type:"DELETE_EXPENDITURE",id:e.id}},M=function(e){return{type:"SAVE_EXPENDITURE",id:e.id,expenditure:e}},P=function(){return{type:"GET_TRANSFERS"}};var R=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(N.a)(this,Object(S.a)(t).call(this,e))).state={title:p.getState().title},a.handleChange=a.handleChange.bind(Object(w.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(w.a)(a)),a}return Object(C.a)(t,e),Object(y.a)(t,[{key:"handleChange",value:function(e){this.setState({title:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.setTitle(this.state.title),this.props.history.push("/group")}},{key:"render",value:function(){return[r.a.createElement(f.a,{hidden:!0}),r.a.createElement(f.a,{hidden:!0}),r.a.createElement(O.a,{container:!0,centered:!0,stackable:!0},r.a.createElement(O.a.Row,{centered:!0},r.a.createElement(h.a,{as:"h2",className:"ui centered"},"What is your expenditures about?")),r.a.createElement(O.a.Row,{centered:!0,column:1},r.a.createElement(O.a.Column,null,r.a.createElement(k.a,{onSubmit:this.handleSubmit,style:{width:"100%",maxWidth:"500px",margin:"10px auto"}},r.a.createElement(k.b,{type:"text",className:"big",onChange:this.handleChange,value:this.state.title,validators:["required"],placeholder:"Enter the title..",errorMessages:["This field is required"],width:16}),r.a.createElement(f.a,{hidden:!0}),r.a.createElement(j.a,{style:{display:"block",margin:"10px auto"},size:"big",inverted:!0,color:"green"},r.a.createElement("i",{className:"save icon"}),"\xa0Save")))))]}}]),t}(r.a.Component),_=Object(s.b)(null,function(e){return{setTitle:function(t){return e(T(t))}}})(R);var I=function(e){function t(e){var a;return Object(x.a)(this,t),(a=Object(N.a)(this,Object(S.a)(t).call(this,e))).state={names:p.getState().people},a.handleNameChanged=a.handleNameChanged.bind(Object(w.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(w.a)(a)),a}return Object(C.a)(t,e),Object(y.a)(t,[{key:"handleNameChanged",value:function(e){var t=e.target.value.split(",").map(function(e){return e.trim()});this.setState({names:Array.from(new Set(t))})}},{key:"handleSubmit",value:function(){this.props.setPeople(this.state.names),this.props.history.push("/exps")}},{key:"render",value:function(){return r.a.createElement("div",{className:"ui center"},r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement(h.a,{as:"h2",textAlign:"center"},"Whom did you share expenditures with?"),r.a.createElement(h.a,{as:"h3",textAlign:"center"},"Enter the names of people to share"),r.a.createElement("div",{className:"ui one column input big stackable center aligned page grid"},r.a.createElement("div",{className:"column twelve wide"},r.a.createElement("div",{className:"ui left icon fluid input"},r.a.createElement("input",{type:"text",placeholder:"Enter seperated with comma(,)",onChange:this.handleNameChanged,defaultValue:this.state.names.join(",")}),r.a.createElement("i",{className:"users icon"})),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",null,this.state.names&&this.state.names.map(function(e,t){return r.a.createElement("button",{className:"ui basic button",key:t},r.a.createElement("i",{className:"icon user"}),e)})),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("div",{className:"ui hidden divider"}),r.a.createElement("button",{className:"ui inverted green big button",onClick:this.handleSubmit},r.a.createElement("i",{className:"save icon"}),"\xa0Save"))))}}]),t}(r.a.Component),L=Object(s.b)(null,function(e){return{setPeople:function(t){return e(D(t))}}})(I),q=a(351),F=a(348),H=a(183),V=a(41),B=a(344),G=a(347),$=a(47),z=a(179),U=a.n(z),X=a(180),J=a.n(X);var W=function(){return{id:void 0,date:void 0,store:void 0,desc:void 0,amount:void 0,payer:void 0}},Y=function(e){function t(e){var a;return Object(x.a)(this,t),a=Object(N.a)(this,Object(S.a)(t).call(this,e)),e.getTransfers(),a.state={editableExpenditure:W(),showSucceedMessage:!1,showErrorMessage:!1,expenditures:p.getState().expenditures,transferList:p.getState().transfers},a.exportToFile=a.exportToFile.bind(Object(w.a)(a)),a.copyToClipboard=a.copyToClipboard.bind(Object(w.a)(a)),a.saveExpenditure=a.saveExpenditure.bind(Object(w.a)(a)),a.handleDismiss=a.handleDismiss.bind(Object(w.a)(a)),a.removeErrorMessage=a.removeErrorMessage.bind(Object(w.a)(a)),a.editExpenditure=a.editExpenditure.bind(Object(w.a)(a)),a}return Object(C.a)(t,e),Object(y.a)(t,[{key:"handleDismiss",value:function(){this.setState({showSucceedMessage:!1})}},{key:"removeErrorMessage",value:function(){this.setState({showErrorMessage:!1})}},{key:"getEditableExpenditureISODate",value:function(){if(this.state.editableExpenditure.date)return new Date(this.state.editableExpenditure.date).toISOString().substr(0,10)}},{key:"editExpenditure",value:function(e){this.setState({editableExpenditure:e}),window.scrollTo(0,0)}},{key:"deleteExpenditure",value:function(e){this.props.deleteExpenditure(e);var t=p.getState(),a=t.expenditures,n=t.transfers;this.setState({expenditures:a,transferList:n})}},{key:"saveExpenditure",value:function(e){e.preventDefault();var t=this.state,a=t.expenditures,n=t.editableExpenditure,r=document.querySelector("#date").value,l=document.querySelector("#store").value,i=document.querySelector("#desc").value,s=parseInt(document.querySelector("#amount").value),c=document.querySelector("#payer>.text").innerText;if(r&&l&&i&&s&&c){if(void 0===n.id){var o=a.length;n.id=0===o?1:a[a.length-1].id+1}n.date=r,n.store=l,n.desc=i,n.amount=s,n.payer=c,this.props.saveExpenditure(n),this.setState({expenditures:p.getState().expenditures.sort(function(e,t){return e.id-t.id}),transferList:p.getState().transfers,editableExpenditure:W(),showSucceedMessage:!0}),this.form.reset()}else this.setState({showErrorMessage:!0})}},{key:"exportToFile",value:function(){var e=new Date,t=[e.getFullYear(),e.getMonth()+1,e.getDate()].join("-");U.a.toJpeg(document.getElementById("expenditure_settlement"),{backgroundColor:"white"}).then(function(e){return J()(e,"expenditure.png_".concat(t,".jpeg"))})}},{key:"copyToClipboard",value:function(){var e=this.state.transferList.map(function(e){return"".concat(e.sender," -> ").concat(e.receiver," : $").concat(Math.round(100*e.amount)/100)}).join("\n");if(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("Copied to clipboard!")}else alert("Nothing to copy. Enter the expenditures and try copying again!")}},{key:"render",value:function(){var e=this,t=p.getState(),a=t.title,n=t.people,l=t.totalAmount,i=n.length>0?Math.round(l/n.length*100)/100:0,s=n.map(function(e){return{key:e,value:e,text:e}});return r.a.createElement("div",{className:"ui center"},r.a.createElement(f.a,{hidden:!0}),r.a.createElement(h.a,{as:"h2",textAlign:"center"},"Enter expenditures, and",r.a.createElement("br",null),"Get to know the efficient settlement!"),r.a.createElement(f.a,{hidden:!0}),r.a.createElement("form",{className:"ui form",ref:function(t){return e.form=t}},r.a.createElement(q.a,{attached:"top",piled:!0},r.a.createElement(F.a,{negative:!0,style:{display:this.state.showErrorMessage?"block":"none"}},r.a.createElement(F.a.Header,null,"Failed to save the expenditure"),r.a.createElement("p",null,"Please enter all fields.")),r.a.createElement(F.a,{info:!0,style:{display:this.state.showSucceedMessage?"block":"none"},onDismiss:this.handleDismiss},r.a.createElement(F.a.Header,null,"Success!"),r.a.createElement("p",null,"The expenditure is saved.")),r.a.createElement(O.a,{columns:"equal",centered:!0,stackable:!0},r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Column,{width:5},r.a.createElement("label",null,"Expense date"),r.a.createElement("input",{id:"date",type:"date",defaultValue:this.getEditableExpenditureISODate()})),r.a.createElement(O.a.Column,{width:6},r.a.createElement("label",null,"Paid amount"),r.a.createElement(H.a,{id:"amount",labelPosition:"left",type:"number",placeholder:"(e.g. 2)",defaultValue:this.state.editableExpenditure.amount,onChange:this.removeErrorMessage},r.a.createElement(V.a,{basic:!0},"$"),r.a.createElement("input",null))),r.a.createElement(O.a.Column,{width:5},r.a.createElement("label",null,"Payer name"),r.a.createElement("br",null),r.a.createElement(B.a,{id:"payer",search:!0,options:s,placeholder:this.state.editableExpenditure.payer,defaultValue:this.state.editableExpenditure.payer,onChange:this.removeErrorMessage}))),r.a.createElement(O.a.Row,null,r.a.createElement(O.a.Column,{width:7},r.a.createElement("label",null,"Payee(store) name"),r.a.createElement("input",{id:"store",type:"text",placeholder:"(e.g. K supermarket)",defaultValue:this.state.editableExpenditure.store,onChange:this.removeErrorMessage})),r.a.createElement(O.a.Column,{width:9},r.a.createElement("label",null,"Description"),r.a.createElement("input",{id:"desc",type:"text",placeholder:"(e.g. Buy water)",defaultValue:this.state.editableExpenditure.desc,onChange:this.removeErrorMessage}))))),r.a.createElement(j.a,{attached:"bottom",onClick:this.saveExpenditure},r.a.createElement("i",{className:"".concat(this.state.editableExpenditure.id?"save":"add"," icon")}),this.state.editableExpenditure.id?"Save":"Add")),r.a.createElement(f.a,{hidden:!0}),r.a.createElement(f.a,{hidden:!0}),r.a.createElement("div",{id:"expenditure_settlement"},r.a.createElement(h.a,{as:"h3",textAlign:"left"},"Expenditure Histories of ",r.a.createElement("span",{style:{color:"olive"}},a)),r.a.createElement(G.a,{celled:!0,selectable:!0,sortable:!0,color:"olive"},r.a.createElement(G.a.Header,null,r.a.createElement(G.a.Row,null,["#","Date","Payee(store) Name","Description","Paid Amount","Payer Name","Action"].map(function(e,t){return r.a.createElement(G.a.HeaderCell,{key:t},e)}))),r.a.createElement(G.a.Body,null,this.state.expenditures.map(function(t,a){return r.a.createElement(G.a.Row,{key:a},Object.values(t).map(function(e,t){return r.a.createElement(G.a.Cell,{key:"".concat(a,"_").concat(t)},e)}),r.a.createElement(G.a.Cell,{textAlign:"center",key:"cell_".concat(a)},r.a.createElement("div",{className:"ui small basic icon buttons"},r.a.createElement("button",{className:"ui button",onClick:function(a){return e.editExpenditure(t)}},r.a.createElement("i",{className:"edit icon"})),r.a.createElement("button",{className:"ui button",onClick:function(a){return e.deleteExpenditure(t)}},r.a.createElement("i",{className:"trash alternate icon"})))))}))),r.a.createElement(h.a,{as:"h4",textAlign:"center"},"Your group spent \xa0\xa0",r.a.createElement("span",{className:"ui tag green label"},"$",l)," in total. \xa0\xa0",r.a.createElement("span",{className:"ui tag olive label"},"$",i)," per person."),r.a.createElement(f.a,{hidden:!0}),r.a.createElement(f.a,{hidden:!0}),r.a.createElement(f.a,{horizontal:!0},r.a.createElement(h.a,{as:"h4"},r.a.createElement($.a.Group,{size:"large"},r.a.createElement($.a,{name:"money bill alternate outline"}),r.a.createElement($.a,{corner:!0,name:"bar chart"})),"\xa0\xa0Settlements")),r.a.createElement(h.a,{as:"h4",textAlign:"left"},"This way, you'll be done with the settlement.."),r.a.createElement(G.a,{celled:!0,sortable:!0,selectable:!0,color:"green",textAlign:"center"},r.a.createElement(G.a.Header,null,r.a.createElement(G.a.Row,null,r.a.createElement(G.a.HeaderCell,null,"Sender ",r.a.createElement("i",{className:"arrow right icon"})," Receiver"),r.a.createElement(G.a.HeaderCell,null,"Amount"))),r.a.createElement(G.a.Body,null,this.state.transferList.map(function(e){return r.a.createElement(G.a.Row,null,r.a.createElement(G.a.Cell,null,e.sender," ",r.a.createElement("i",{className:"arrow right icon"})," ",e.receiver),r.a.createElement(G.a.Cell,null,"$",Math.round(100*e.amount)/100))})))),r.a.createElement(f.a,{hidden:!0}),r.a.createElement("button",{className:"ui right floated blue button",onClick:this.exportToFile},r.a.createElement("i",{className:"download icon"})," Download"),r.a.createElement("button",{className:"ui right floated grey button",onClick:this.copyToClipboard},r.a.createElement("i",{className:"copy icon"})," Copy"),r.a.createElement(f.a,{hidden:!0}),r.a.createElement(f.a,{hidden:!0}))}}]),t}(r.a.Component),K=Object(s.b)(null,function(e){return{saveExpenditure:function(t){return e(M(t))},deleteExpenditure:function(t){return e(A(t))},getTransfers:function(t){return e(P())}}})(Y);var Q=function(){return[r.a.createElement(E.a,null,r.a.createElement(v.a,null,r.a.createElement(h.a,{as:"h1",className:"ui centered"},r.a.createElement(v.b,{exact:!0,to:"/",className:"step"},r.a.createElement(b.a,{src:"https://fontmeme.com/permalink/190830/b2a3482ddfcbadd5d59ca2e91bc75a81.png",size:"medium",centered:!0})),r.a.createElement(h.a.Subheader,null,"Make settle/calculate easier for expenses spent with your friends.")),r.a.createElement(f.a,{hidden:!0}),r.a.createElement("div",{className:"ui fluid ordered steps"},r.a.createElement(v.b,{exact:!0,to:"/",className:"step"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"title"},"Expenditure Title"),r.a.createElement("div",{className:"description"},"Enter the title of the expenditure"))),r.a.createElement(v.b,{exact:!0,to:"/group",className:"step"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"title"},"Group Information"),r.a.createElement("div",{className:"description"},"Enter names of people to share"))),r.a.createElement(v.b,{exact:!0,to:"/exps",className:"step"},r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"title"},"Expenditure Details"),r.a.createElement("div",{className:"description"},"Enter expenditure details")))),r.a.createElement(g.a,{exact:!0,path:"/",component:_}),r.a.createElement(g.a,{exact:!0,path:"/group",component:L}),r.a.createElement(g.a,{exact:!0,path:"/exps",component:K})))]};a(332);i.a.render(r.a.createElement(s.a,{store:p},r.a.createElement("div",{style:{padding:"50px 0px"}},r.a.createElement(Q,null))),document.getElementById("root")),window.store=p}},[[194,1,2]]]);
//# sourceMappingURL=main.223e34a4.chunk.js.map